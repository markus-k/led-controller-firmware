/* *  Copyright (C) 2018  Markus Kasten * *  This program is free software: you can redistribute it and/or modify *  it under the terms of the GNU General Public License as published by *  the Free Software Foundation, either version 3 of the License, or *  (at your option) any later version. * *  This program is distributed in the hope that it will be useful, *  but WITHOUT ANY WARRANTY; without even the implied warranty of *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the *  GNU General Public License for more details. * *  You should have received a copy of the GNU General Public License *  along with this program.  If not, see <http://www.gnu.org/licenses/>. */#include <stdio.h>#include <string.h>#include <stdlib.h>#include <math.h>int main(int argc, const char **argv) {  float gamma = 2.0f;  int bits = 8;  int ibits = 8;  char varname[16] = "gamma";#define fmtstr "%2d"  if (argc < 4) {    printf("  Usage: %s GAMMA BITS IBITS", argv[0]);    return 1;  }  puts("/* THIS FILE WAS GENERATED BY gamma-lut-gen */\n\n"       "#include <stdint.h>\n");  sscanf(argv[1], "%f", &gamma);  bits = atoi(argv[2]);  ibits = atoi(argv[3]);  if (argc > 4) {    strcpy(varname, argv[4]);  }  printf("const uint%d_t %s[] = {\n    ", (int)ceil(bits / 8.0f) * 8, varname);  for (int i = 0; i < (1 << ibits); i++) {    int val = (int)    (      ((1 << bits) - 1.0f) *      pow(        (i / ((1 << ibits) - 1.0f)),        gamma      )    );    printf(fmtstr ", ", val);    if ((i + 1) % 8 == 0) {      if (i < (1 << ibits) - 1) {        printf("\n");      }      printf("    ");    }  }  printf("\n};\n");  return 0;}